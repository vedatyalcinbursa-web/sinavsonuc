<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Rahmiye Palabıyık İHO - Sınav Sonuç</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #c0392b; /* İmam Hatip kırmızısı/bordo tonu */
            --secondary-color: #e74c3c;
            --bg-gradient: linear-gradient(135deg, #ece9e6 0%, #ffffff 100%);
            --text-dark: #2c3e50;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background: var(--bg-gradient);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
            color: var(--text-dark);
        }

        .container {
            background-color: #fff;
            padding: 40px 30px;
            border-radius: 20px;
            box-shadow: 0 15px 50px rgba(0, 0, 0, 0.1);
            width: 100%;
            max-width: 450px;
            text-align: center;
            position: relative;
            border-top: 5px solid var(--primary-color);
        }

        h1 {
            font-size: 1.3rem;
            color: var(--primary-color);
            margin-bottom: 5px;
            line-height: 1.4;
            font-weight: 700;
        }
        
        h3 {
            font-size: 1rem;
            font-weight: 500;
            color: #7f8c8d;
            margin-top: 0;
            margin-bottom: 25px;
        }

        /* Input ve Butonlar */
        input[type="password"] { 
            width: 100%; padding: 15px;
            border: 2px solid #ddd; border-radius: 10px;
            box-sizing: border-box; font-size: 18px; text-align: center;
            letter-spacing: 4px; transition: 0.3s;
            background: #f9f9f9;
        }
        input[type="password"]:focus { border-color: var(--primary-color); outline: none; background: #fff; }
        
        button { 
            width: 100%; padding: 15px; margin-top: 15px;
            background-color: var(--primary-color);
            color: white; border: none; border-radius: 10px;
            cursor: pointer; font-size: 16px; font-weight: 600;
            transition: 0.2s;
        }
        button:hover { background-color: #a93226; }
        
        .error { color: #e74c3c; margin-top: 15px; font-size: 0.9rem; display: none; }
        .error.show { display: block; }

        /* Sonuç Ekranı */
        .hidden { display: none; }
        
        .score-circle {
            width: 150px; height: 150px;
            border-radius: 50%;
            background: var(--primary-color);
            color: white;
            display: flex; flex-direction: column;
            justify-content: center; align-items: center;
            margin: 20px auto;
            box-shadow: 0 10px 25px rgba(192, 57, 43, 0.3);
        }
        .big-score { font-size: 2.5rem; font-weight: 800; line-height: 1; }
        .score-label { font-size: 0.8rem; opacity: 0.9; }

        .lesson-list { text-align: left; margin-top: 25px; }
        .lesson-row { 
            display: flex; justify-content: space-between; padding: 10px;
            border-bottom: 1px solid #eee; font-size: 0.95rem;
        }
        .lesson-name { font-weight: 600; color: #555; }
        .net-score { font-weight: 700; color: var(--primary-color); }

        /* Footer */
        .footer {
            margin-top: 30px;
            font-size: 0.8rem;
            color: #bdc3c7;
            border-top: 1px solid #f1f1f1;
            padding-top: 15px;
        }
        .footer strong { color: #95a5a6; }

    </style>
</head>
<body>

    <div class="container">
        <h1>RAHMİYE PALABIYIK<br>İMAM HATİP ORTAOKULU</h1>
        <h3>Sınav Sonuç Ekranı</h3>

        <div id="login-screen">
            <p style="font-size:0.9rem; color:#666;">Okul numaranızı/şifrenizi giriniz:</p>
            <input type="password" id="sifre" placeholder="ŞİFRE" onkeyup="enterKontrol(event)">
            <button id="sorgulaBtn" onclick="sorgula()">SONUCU GÖSTER</button>
            <div id="hata-mesaji" class="error"></div>
        </div>

        <div id="result-screen" class="hidden">
            <h2 id="ogrenci-adi" style="color:#333; margin:0;">Öğrenci Adı</h2>
            
            <div class="score-circle">
                <span class="big-score" id="lgs-puani">000</span>
                <span class="score-label">LGS PUANI</span>
            </div>
            
            <div id="ders-listesi" class="lesson-list"></div>

            <button onclick="location.reload()" style="background-color: #7f8c8d;">Çıkış Yap</button>
        </div>

        <div class="footer">
            Hazırlayan: <strong>Vedat YALÇIN</strong>
        </div>
    </div>

    <script>
        const hataKutusu = document.getElementById('hata-mesaji');
        const sorgulaBtn = document.getElementById('sorgulaBtn');

        function enterKontrol(event) {
            if (event.key === "Enter") {
                sorgula();
            }
        }

        async function sorgula() {
            const sifre = document.getElementById('sifre').value.trim();
            
            hataKutusu.classList.remove('show');

            if (!sifre) {
                hataKutusu.innerText = "Lütfen şifre giriniz.";
                hataKutusu.classList.add('show');
                return;
            }

            sorgulaBtn.innerText = "Sorgulanıyor...";
            sorgulaBtn.disabled = true;

            try {
                // Not: fetch işlemi sadece sunucuda (GitHub Pages) çalışır.
                const response = await fetch(`veriler/${sifre}.json?v=${new Date().getTime()}`);
                
                if (!response.ok) {
                    throw new Error("Veri bulunamadı");
                }

                const veri = await response.json();
                
                // Yarım saniye bekletme hissi (UX için)
                setTimeout(() => {
                    sonuclariGoster(veri);
                }, 400);

            } catch (error) {
                console.error(error); // Hata detayını konsola yaz
                hataKutusu.innerText = "Hatalı şifre veya sistem hatası.";
                hataKutusu.classList.add('show');
                sorgulaBtn.innerText = "SONUCU GÖSTER";
                sorgulaBtn.disabled = false;
            }
        }

        function sonuclariGoster(veri) {
            document.getElementById('login-screen').classList.add('hidden');
            document.getElementById('result-screen').classList.remove('hidden');

            document.getElementById('ogrenci-adi').innerText = veri.ad;
            document.getElementById('lgs-puani').innerText = parseFloat(veri.puan).toFixed(3);

            const dersListesi = document.getElementById('ders-listesi');
            dersListesi.innerHTML = ''; 

            const dersAdlari = {
                'TR': 'Türkçe', 'MAT': 'Matematik', 'FEN': 'Fen Bilimleri', 
                'INK': 'İnkılap Tarihi', 'DIN': 'Din Kültürü', 'ING': 'İngilizce'
            };
            const siralama = ['TR', 'MAT', 'FEN', 'INK', 'DIN', 'ING'];

            siralama.forEach(kod => {
                if(veri.dersler[kod]) {
                    const d = veri.dersler[kod];
                    const html = `
                    <div class="lesson-row">
                        <span class="lesson-name">${dersAdlari[kod]}</span>
                        <span>${d.d} D / ${d.y} Y <span style="margin-left:10px;" class="net-score">${d.n} Net</span></span>
                    </div>`;
                    dersListesi.innerHTML += html;
                }
            });
        }
    </script>
</body>
</html>